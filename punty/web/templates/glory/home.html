{% extends "glory/base.html" %}

{% block title %}Mat's Group 1 Glory - Australia's Most Dangerous Tipping Comp{% endblock %}

{% block head %}
<style>
    /* Floating money animation */
    @keyframes floatMoney {
        0%, 100% { transform: translateY(0) rotate(-5deg); opacity: 0.8; }
        50% { transform: translateY(-20px) rotate(5deg); opacity: 1; }
    }
    .money-float-1 { animation: floatMoney 3s ease-in-out infinite; animation-delay: 0s; }
    .money-float-2 { animation: floatMoney 3.5s ease-in-out infinite; animation-delay: 0.5s; }
    .money-float-3 { animation: floatMoney 4s ease-in-out infinite; animation-delay: 1s; }

    /* Shine effect on gold */
    @keyframes shine {
        0% { background-position: -200% center; }
        100% { background-position: 200% center; }
    }
    .shine-effect {
        background: linear-gradient(90deg, #D4A537 0%, #F0C850 25%, #FFD700 50%, #F0C850 75%, #D4A537 100%);
        background-size: 200% auto;
        animation: shine 3s linear infinite;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* TAB Receipt style */
    .tab-receipt {
        background: #FFFEF5;
        border: 2px dashed #D4A537;
        font-family: 'Courier New', monospace;
        position: relative;
    }
    .tab-receipt::before {
        content: '';
        position: absolute;
        top: -10px;
        left: 20%;
        right: 20%;
        height: 20px;
        background: repeating-linear-gradient(90deg, transparent, transparent 5px, #D4A537 5px, #D4A537 10px);
        opacity: 0.3;
    }

    /* Pulse danger */
    @keyframes dangerPulse {
        0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
        50% { box-shadow: 0 0 20px 10px rgba(239, 68, 68, 0); }
    }
    .danger-pulse { animation: dangerPulse 2s infinite; }

    /* Horse race track */
    .race-track {
        background: repeating-linear-gradient(
            90deg,
            #228B22 0px,
            #228B22 40px,
            #1e7a1e 40px,
            #1e7a1e 80px
        );
    }

    /* Trophy bounce */
    @keyframes trophyBounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }
    .trophy-bounce { animation: trophyBounce 1s ease-in-out infinite; }
</style>
{% endblock %}

{% block content %}
<div class="space-y-8">
    <!-- HERO SECTION - Make it LOUD -->
    <div class="relative overflow-hidden rounded-3xl shadow-2xl">
        <!-- Animated gradient background -->
        <div class="absolute inset-0 bg-gradient-to-br from-g1-green via-g1-green-dark to-g1-navy"></div>

        <!-- Racing stripe pattern -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute top-1/2 left-0 right-0 h-24 race-track transform -rotate-2"></div>
        </div>

        <!-- Floating money icons -->
        <div class="absolute top-10 left-10 text-4xl money-float-1 opacity-60">üí∞</div>
        <div class="absolute top-20 right-16 text-3xl money-float-2 opacity-50">üíµ</div>
        <div class="absolute bottom-20 left-20 text-3xl money-float-3 opacity-50">üèÜ</div>
        <div class="absolute bottom-10 right-10 text-4xl money-float-1 opacity-60">üêé</div>

        <div class="relative px-6 py-12 md:py-20 text-center">
            <!-- Logo with glow -->
            <div class="relative inline-block mb-6">
                <div class="absolute inset-0 bg-g1-gold/30 blur-3xl rounded-full"></div>
                <img src="/static/glory/logo.png" alt="Mat's Group 1 Glory" class="relative h-48 md:h-64 mx-auto drop-shadow-2xl hover:scale-105 transition-transform duration-300">
            </div>

            <!-- DANGEROUS Tagline -->
            <div class="mb-4">
                <span class="inline-block bg-red-600 text-white text-xs font-black px-3 py-1 rounded-full uppercase tracking-wider danger-pulse">
                    ‚ö†Ô∏è Warning: Highly Addictive
                </span>
            </div>

            <h1 class="font-display text-4xl md:text-6xl font-black text-white mb-2 tracking-tight">
                Australia's Most
            </h1>
            <h2 class="font-display text-5xl md:text-7xl font-black mb-6">
                <span class="shine-effect">DANGEROUS</span>
            </h2>
            <h3 class="font-display text-3xl md:text-4xl font-bold text-white/90 mb-6">
                Tipping Comp
            </h3>

            <p class="text-xl text-white/80 max-w-2xl mx-auto mb-8 font-medium">
                Pick winners. Crush mates. Claim eternal glory on the Honour Board.
                <span class="text-g1-gold font-bold">No money required.</span>
            </p>

            <!-- CTA Buttons -->
            {% if not user %}
            <div class="flex flex-col sm:flex-row justify-center gap-4 mb-8">
                <a href="/group1glory/register" class="group relative inline-flex items-center justify-center gap-3 bg-gradient-to-r from-g1-gold via-g1-gold-light to-g1-gold text-g1-green-dark font-black text-xl px-10 py-5 rounded-2xl shadow-lg hover:shadow-glow-gold transform hover:scale-105 transition-all">
                    <span>üèá JOIN THE COMP</span>
                    <svg class="w-6 h-6 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                    </svg>
                </a>
                <a href="/group1glory/login" class="inline-flex items-center justify-center gap-2 bg-white/10 backdrop-blur text-white font-bold text-lg px-8 py-5 rounded-2xl border-2 border-white/30 hover:bg-white/20 hover:border-white/50 transition-all">
                    Already in? Login
                </a>
            </div>
            {% else %}
            <a href="/group1glory/picks" class="group inline-flex items-center justify-center gap-3 bg-gradient-to-r from-g1-gold via-g1-gold-light to-g1-gold text-g1-green-dark font-black text-xl px-10 py-5 rounded-2xl shadow-lg hover:shadow-glow-gold transform hover:scale-105 transition-all mb-8">
                <span>üéØ PICK YOUR WINNERS</span>
                <svg class="w-6 h-6 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
            </a>
            {% endif %}

            <!-- Free banner - make it pop -->
            <div class="inline-flex items-center gap-3 bg-white/95 backdrop-blur px-6 py-3 rounded-full shadow-lg">
                <span class="text-3xl">üéÅ</span>
                <span class="font-bold text-g1-green text-lg">100% FREE for Autumn 2026 Carnival!</span>
            </div>
        </div>
    </div>

    <!-- TAB RECEIPT STYLE ENTRY CARD -->
    <div class="grid md:grid-cols-2 gap-6">
        <div class="tab-receipt rounded-2xl p-6 shadow-lg">
            <div class="text-center mb-4">
                <div class="text-xs text-gray-500 uppercase tracking-widest">Mat's Group One Glory</div>
                <div class="text-2xl font-black text-g1-navy">ENTRY TICKET</div>
                <div class="text-xs text-gray-400">--------------------------------</div>
            </div>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-gray-600">COMPETITION:</span>
                    <span class="font-bold text-g1-navy">AUTUMN 2026</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ENTRY FEE:</span>
                    <span class="font-bold text-green-600">$0.00 FREE</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">PRIZE:</span>
                    <span class="font-bold text-g1-gold">ETERNAL GLORY</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">GROUP 1 RACES:</span>
                    <span class="font-bold text-g1-navy">20+</span>
                </div>
            </div>
            <div class="text-xs text-gray-400 text-center mt-4">--------------------------------</div>
            <div class="text-center mt-2">
                <div class="text-xs text-gray-500">BARCODE: G1-GLORY-2026</div>
                <div class="flex justify-center gap-0.5 mt-2">
                    {% for i in range(30) %}
                    <div class="w-1 bg-gray-800" style="height: {{ [15,25,20,30,15,25,20,15,30,20][i % 10] }}px;"></div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Points System Card -->
        <div class="bg-white rounded-2xl shadow-lg p-6 border-2 border-g1-green/20">
            <h3 class="font-display text-2xl font-bold text-g1-navy mb-4 flex items-center gap-2">
                <span class="text-3xl">üìä</span> Points System
            </h3>
            <div class="space-y-4">
                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-xl border border-amber-200">
                    <div class="w-14 h-14 pos-1 rounded-full flex items-center justify-center font-black text-xl trophy-bounce">ü•á</div>
                    <div class="flex-1">
                        <div class="font-bold text-g1-navy text-lg">Your pick wins!</div>
                        <div class="text-gray-500 text-sm">First place finish</div>
                    </div>
                    <div class="text-3xl font-black text-g1-gold">+3</div>
                </div>
                <div class="flex items-center gap-4 p-4 bg-gray-50 rounded-xl">
                    <div class="w-14 h-14 pos-2 rounded-full flex items-center justify-center font-black text-xl">ü•à</div>
                    <div class="flex-1">
                        <div class="font-bold text-g1-navy text-lg">Place second</div>
                        <div class="text-gray-500 text-sm">Silver position</div>
                    </div>
                    <div class="text-3xl font-black text-gray-400">+2</div>
                </div>
                <div class="flex items-center gap-4 p-4 bg-orange-50/50 rounded-xl">
                    <div class="w-14 h-14 pos-3 rounded-full flex items-center justify-center font-black text-xl">ü•â</div>
                    <div class="flex-1">
                        <div class="font-bold text-g1-navy text-lg">Show third</div>
                        <div class="text-gray-500 text-sm">Bronze position</div>
                    </div>
                    <div class="text-3xl font-black text-orange-400">+1</div>
                </div>
            </div>
        </div>
    </div>

    {% if competition %}
    <!-- LIVE Competition Section -->
    <div class="bg-gradient-to-br from-g1-navy via-g1-green-dark to-g1-green rounded-2xl shadow-2xl p-8 text-white relative overflow-hidden">
        <!-- Animated background pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22><circle cx=%2220%22 cy=%2220%22 r=%222%22 fill=%22white%22/></svg>'); background-size: 40px;"></div>
        </div>

        <div class="relative">
            <div class="flex flex-wrap items-center gap-4 mb-6">
                <span class="badge-live flex items-center gap-2">
                    <span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>
                    LIVE NOW
                </span>
                <h2 class="font-display text-3xl font-black">{{ competition.name }}</h2>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Stats -->
                <div class="bg-white/10 backdrop-blur rounded-xl p-5">
                    <div class="text-white/60 text-sm mb-1">Total Races</div>
                    <div class="text-4xl font-black text-g1-gold">{{ competition.races|length }}</div>
                    <div class="text-white/60 text-xs">Group 1 events</div>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-5">
                    <div class="text-white/60 text-sm mb-1">Competition Dates</div>
                    <div class="text-xl font-bold">{{ competition.start_date.strftime('%d %b') }}</div>
                    <div class="text-white/60 text-xs">to {{ competition.end_date.strftime('%d %b %Y') }}</div>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-5">
                    <div class="text-white/60 text-sm mb-1">Your Status</div>
                    {% if user %}
                    <div class="text-xl font-bold text-green-400">‚úì Entered</div>
                    <div class="text-white/60 text-xs">Ready to dominate</div>
                    {% else %}
                    <div class="text-xl font-bold text-g1-gold">Not Entered</div>
                    <a href="/group1glory/register" class="text-g1-gold-light text-xs hover:underline">Join now ‚Üí</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Preview -->
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
        <div class="bg-g1-green px-6 py-4 flex items-center justify-between">
            <h2 class="font-display text-xl font-bold text-white flex items-center gap-2">
                <span class="text-2xl">üèÜ</span> Current Standings
            </h2>
            <a href="/group1glory/leaderboard" class="text-g1-gold font-semibold text-sm hover:text-g1-gold-light transition-colors">
                Full Leaderboard ‚Üí
            </a>
        </div>
        {% if top_3 %}
        <div class="p-6 space-y-3">
            {% for entry in top_3 %}
            <div class="flex items-center gap-4 p-4 rounded-xl transition-all hover:scale-[1.02] {% if loop.index == 1 %}bg-gradient-to-r from-amber-100 via-yellow-50 to-amber-100 border-2 border-amber-300 shadow-lg{% elif loop.index == 2 %}bg-gradient-to-r from-gray-100 to-gray-50 border border-gray-200{% elif loop.index == 3 %}bg-gradient-to-r from-orange-100 to-orange-50 border border-orange-200{% endif %}">
                <div class="w-12 h-12 rounded-full flex items-center justify-center font-black text-lg {% if loop.index == 1 %}pos-1 trophy-bounce{% elif loop.index == 2 %}pos-2{% else %}pos-3{% endif %}">
                    {% if loop.index == 1 %}üëë{% elif loop.index == 2 %}ü•à{% else %}ü•â{% endif %}
                </div>
                <div class="flex-1">
                    <div class="font-bold text-g1-navy text-lg">{{ entry.display_name }}</div>
                    <div class="text-sm text-gray-500">{{ entry.winners or 0 }} winner{{ 's' if (entry.winners or 0) != 1 else '' }} picked</div>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-black {% if loop.index == 1 %}text-g1-gold{% else %}text-g1-green{% endif %}">{{ entry.total_points }}</div>
                    <div class="text-xs text-gray-500 uppercase tracking-wide">points</div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="p-12 text-center">
            <div class="text-6xl mb-4">üèá</div>
            <p class="text-gray-500 text-lg">No results yet - be the first to pick!</p>
        </div>
        {% endif %}
    </div>

    <!-- Upcoming Races -->
    {% if upcoming_races %}
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
        <div class="bg-gradient-to-r from-g1-gold to-g1-gold-dark px-6 py-4 flex items-center justify-between">
            <h2 class="font-display text-xl font-bold text-g1-green-dark flex items-center gap-2">
                <span class="text-2xl">üèÅ</span> Next Up
            </h2>
            {% if user %}
            <a href="/group1glory/picks" class="text-g1-green-dark font-semibold text-sm hover:underline">
                Pick Your Horses ‚Üí
            </a>
            {% endif %}
        </div>
        <div class="p-6 grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            {% for race in upcoming_races %}
            <div class="group border-2 border-gray-200 rounded-xl p-5 hover:border-g1-gold hover:shadow-xl transition-all cursor-pointer relative overflow-hidden">
                <!-- G1 Badge -->
                <div class="absolute top-3 right-3">
                    <span class="badge-g1">G1</span>
                </div>
                <!-- Status indicator -->
                {% if race.status == 'open' %}
                <div class="absolute top-3 left-3">
                    <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1">
                        <span class="w-1.5 h-1.5 bg-white rounded-full animate-pulse"></span>
                        OPEN
                    </span>
                </div>
                {% endif %}

                <div class="mt-8">
                    <h3 class="font-display font-bold text-g1-navy text-lg mb-1 group-hover:text-g1-green transition-colors">{{ race.race_name }}</h3>
                    <p class="text-gray-500 mb-3">
                        <span class="font-medium">{{ race.venue }}</span> ‚Ä¢ {{ race.distance }}m
                    </p>
                    <div class="flex items-center gap-2 text-g1-gold font-bold">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        {{ race.race_date|melb_date }}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% else %}
    <!-- No Active Competition - Coming Soon -->
    <div class="bg-gradient-to-br from-g1-green to-g1-navy rounded-2xl shadow-2xl p-12 text-center text-white relative overflow-hidden">
        <div class="absolute inset-0 opacity-10">
            <div class="absolute top-10 left-10 text-8xl">üèá</div>
            <div class="absolute bottom-10 right-10 text-8xl">üèÜ</div>
        </div>
        <div class="relative">
            <div class="text-6xl mb-4">‚è≥</div>
            <h2 class="font-display text-3xl font-black mb-4">Coming Soon!</h2>
            <p class="text-white/80 text-lg max-w-md mx-auto mb-6">
                The next tipping competition is being prepared. Register now to be ready when gates open!
            </p>
            <a href="/group1glory/register" class="inline-flex items-center gap-2 bg-g1-gold text-g1-green-dark font-bold px-8 py-4 rounded-xl hover:bg-g1-gold-light transition-colors">
                Get Ready
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
            </a>
        </div>
    </div>
    {% endif %}

    <!-- Why This Comp - Social Proof -->
    <div class="grid md:grid-cols-3 gap-6">
        <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow">
            <div class="text-5xl mb-3">üéØ</div>
            <h3 class="font-display text-xl font-bold text-g1-navy mb-2">Simple Rules</h3>
            <p class="text-gray-600">Pick 1 horse per race. That's it. No complex betting, no multi-legs, just pure tipping skill.</p>
        </div>
        <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow">
            <div class="text-5xl mb-3">üî•</div>
            <h3 class="font-display text-xl font-bold text-g1-navy mb-2">Bragging Rights</h3>
            <p class="text-gray-600">Winners get their name on the Honor Board forever. Losers buy the drinks at the next race day.</p>
        </div>
        <div class="bg-white rounded-2xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow">
            <div class="text-5xl mb-3">üí∏</div>
            <h3 class="font-display text-xl font-bold text-g1-navy mb-2">Zero Cost</h3>
            <p class="text-gray-600">Completely free to play. All glory, no financial risk. Unlike actual punting...</p>
        </div>
    </div>

    <!-- Final CTA -->
    {% if not user %}
    <div class="bg-gradient-to-r from-g1-gold via-g1-gold-light to-g1-gold rounded-2xl shadow-lg p-8 text-center">
        <h2 class="font-display text-3xl font-black text-g1-green-dark mb-4">Ready to Prove You're the Best?</h2>
        <p class="text-g1-green-dark/80 text-lg mb-6">Join Mat's Group One Glory and show your mates who really knows racing.</p>
        <a href="/group1glory/register" class="inline-flex items-center gap-2 bg-g1-green text-white font-bold text-lg px-10 py-4 rounded-xl hover:bg-g1-green-dark transition-colors shadow-lg">
            <span>üèá Enter the Competition</span>
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
